<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>&#9829; Izaberi ime za bebu &#9829;</title>

    <link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAA99/GAP/PnAC3qegAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAiIgAAAAAAAhERIAAAAAACEREgAAAAAAIhESAAAAAAAhERIAAAAAACIREgAAAAAAIRESAAAAAAAiIRIAAAAAACEREgAAAAAAIiIiAAAAAAADMzAAAAAAAAMzMAAAAAAAADMAAAAAAAAAMwAAAAAAAAAAAAAAD//wAA/D8AAPgfAAD4HwAA+B8AAPgfAAD4HwAA+B8AAPgfAAD4HwAA+B8AAPw/AAD8PwAA/n8AAP5/AAD//wAA" rel="icon" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@600&display=swap" rel="stylesheet">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="confetti.js"></script>
    <script type="text/javascript" src="untitled.js"></script>
    
    <style>

        title {
            font-size: 200%;
        }

        body {
            background-image: url('https://jooinn.com/images/balloons-12.jpg');
            background-size: cover;
            font-family: Verdana, sans-serif;
            overflow: hidden;
        }
        
        p {
            display: block;
            color: purple;
            font-size: 24px;
            text-align: center;
            width: 45%;
            background-color: rgba(256,256,256,.75);
            margin: 56px auto 0 auto;
            padding: 1rem;
            border-radius: 1rem;
        }

        button {
            height: 48px;
            margin: 11rem auto 2rem auto;
            text-align: center;
            display: block;
            border-radius: 24px;
            color: white;
            background-color: purple;
            padding: 12px;
            border-style: none;
            width: 200px;
            cursor: pointer;
        }

        button:disabled {
        	background-color: gray;
        	cursor: not-allowed;
        }

        #test {
            line-height: 78px;
            height:  78px;
            font-size: 74px;
            font-weight: 800;
            font-family: 'Roboto Mono', monospace;
            text-shadow: 2px 2px black;
        }

        #jupi {
            visibility: hidden;
        }

        #cnt {
        	height: 24px;
        	width: 24px;
        	font-size: 12px;
        	line-height: 24px;
        	text-align: center;
        }

        #timer {
            display: none;
            width: 100%;
            height: 100%;
            font-size: 35em;
            color: purple;
            position: absolute;
            top: 50px;
            left: 0;
            text-align: center;
            text-shadow: 0 0 30px white, 0 0 40px yellow, 0 0 50px blue;
            opacity: 0;
            animation: fade .5s linear;
            overflow: hidden;
        }

        @keyframes fade {
        	0%, 100% {opacity: 0;}
        	25%, 75% {opacity: 1;}
        }

        #naslov {
        	font-size: 100px;
		    color: purple;
		    position: absolute;
		    width: 99%;
		    top: -60px;
		    z-index: -10;
		    text-shadow: 0 0 15px white, 0 0 20px yellow, 0 0 25px blue;
            -webkit-text-stroke: 2px purple;
        }

        .bebac {
        	width: auto;
        	height: 150px;
        	position: absolute;
        	bottom: 0;
            width: auto;
        }

        /* The switch - the box around the slider */
.switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
}

/* Hide default HTML checkbox */
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

/* The slider */
.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: purple;
  -webkit-transition: .4s;
  transition: .4s;
}

.slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  -webkit-transition: .4s;
  transition: .4s;
}

input:checked + .slider {
  background-color: purple;
}

input:focus + .slider {
  box-shadow: 0 0 1px purple;
}

input:checked + .slider:before {
  -webkit-transform: translateX(26px);
  -ms-transform: translateX(26px);
  transform: translateX(26px);
}

/* Rounded sliders */
.slider.round {
  border-radius: 34px;
}

.slider.round:before {
  border-radius: 50%;
}

#wrapper {
    width: 370px;
    text-align: center;
    background-color: rgba(255,255,255, .85);
    line-height: 3rem;
    position: absolute;
    top: 10px;
    right: 10px;
    color: purple;
    border-radius: 1rem;
}

.zaToggler {
    font-size: 3rem;
    font-variant: small-caps;
    font-weight: 600;
    display: inline-block;
    line-height: 3rem;
}

#bata {
    margin-right: 1rem;
    transition: ease all .2s;
}

#seka {
    margin-left: 1rem;
    transition: ease all .2s;
}

#modalWrap {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0, .5);
    z-index: 200;
    display: none;
}

#modal {
    width: 85%;
    height: 85%;
    position: absolute;
    top: 7.5%;
    left: 7.5%;
    background-color: white;
    border-radius: 1rem;
    float: left;
    z-index: 1000;
    margin: 0;
    padding: 0;
    display: none;
}

#iksic {
    position: absolute;
    top: .5em;
    right: .5em;
    display: block;
    width: 1.5rem;
    height: 1.5rem;
    color: purple;
    text-align: center;
    line-height: 1.5rem;
    font-size: 1.5rem;
    cursor: pointer;
    font-weight: 900;
    border-radius: 50%;
}

#dugmeZaModal {
    position: absolute;
    top: 10px;
    border-radius: 1rem;
    background-color: rgba(255, 255, 255, .85);
    color: purple;
    font-size: 2rem;
    height: 3.5rem;
    line-height: 3.5rem;
    font-weight: 900;
    cursor: pointer;
    width: 200px;
    text-align: center;
}

#dugmeZaModal:focus {
    border: none;
}

#gornjaLinija {
    width: 100%;
    margin: 0 auto;
    height: 2rem;
    line-height: 2rem;
}

#unosImena {
    float: left;
    display: inline-block;
}

#slanjeImena {
    float: left;
    display: inline-block;
}
        
    </style>
    
</head>
<body onLoad="animirajBebu()">

    <div id="dugmeZaModal" onclick="otvoriModal()">IMENA</div>

	<h1 id="naslov">&#9829; &#9829; &#9829; &#9829; &#9829; Nazivač beba &#9829; &#9829; &#9829; &#9829; &#9829;</h1>
    
    <div id="modalWrap"></div>
        <div id="modal">
            <div id="iksic">x</div>
            <!-- <div id="gornjaLinija">
                <input id="unosImena" title="Kako biste dodali imena, unesite ih razdvojena zarezom." placeholder='Na primer: "Splinter,Donatelo, Leonardo,Mikelanđelo" ...' >
                <button id="slanjeImena">Dodaj imena</button>
            </div>
            <div id="levaKolona"></div>
            <div id="desnaKolona"></div> -->
        </div>

    <div id="wrapper">
        <span class="zaToggler" id="bata">bata</span>
    <label class="switch">
      <input type="checkbox" value="bata" id="toggler" onclick="promeniPol()">
      <span class="slider round"></span>
    </label>
        <span class="zaToggler" id="seka">seka</span>
    </div>
    
    <div id="timer"></div>

    <button id="create" onclick="sve(2, 3);this.disabled=true;this.innerText='Srećno!'">Klikni da saznaš ime!</button>
    <audio id="drumRoll" src='src/drum.mp3' type="audio/mpeg" loop></audio>
    <audio id="yeeey" src='src/yeeey.wav' type="audio/wav"></audio>

    <p>Zvaće se:</p>
    <p id="test"><span id="prethodnik"></span><span id="sledbenik"></span></p>

    <script type="text/javascript">

    	new CircleType(document.getElementById('naslov')).radius(640);

        const imena = ['Mlatimud', 'Bradilko', 'Sofronije', 'Alimpije', 'Ćelavko', 'Glavudžovski', 'Čićvu']
        const imenaZenska = ['Mlatimudica', 'Bradilka', 'Sofronija', 'Alimpijka', 'Ćelavica', 'Glavudžovska', 'Čićicavu']
        const slova = 'A,B,C,Č,Ć,D,Đ,E,F,G,H,I,J,K,L,M,N,O,P,R,S,Š,T,U,V,Z,Ž,a,b,c,č,ć,d,đ,e,f,g,h,i,j,k,l,m,n,o,p,r,s,š,t,u,v,z,ž'.split(',')

        document.getElementById('iksic').addEventListener('click', zatvoriModal);
        document.getElementById('create').addEventListener('click', iskljuciToggler);
        document.getElementById('create').addEventListener('click', function(){
            const dugme = document.getElementById('dugmeZaModal')
            dugme.style.cursor = "not-allowed"
            dugme.onclick = ""
        });
        document.getElementById('modalWrap').addEventListener('click', zatvoriModal);

        var togglerVrednost = document.getElementById("toggler").value
        if (togglerVrednost === 'bata'){
            document.getElementById('seka').style.color = 'rgba(0,0,0,.1)'
            var rnd_ime = imena[Math.floor(Math.random() * imena.length)]
        } else {
            document.getElementById('bata').style.color = 'rgba(0,0,0,.1)'
            var rnd_ime =  imenaZenska[Math.floor(Math.random() * imenaZenska.length)]
        }

        var counter = document.getElementById('cnt');
        var t = document.getElementById("timer");
        
		const sledbenik = document.getElementById('sledbenik')
        const divZaPisanje = document.getElementById('prethodnik')

        function randomSlovo(){
            return slova[Math.floor(Math.random() * slova.length)]
        }

        function bubnjeviPocni(){
        	const bubnjevi = document.getElementById('drumRoll');
        	bubnjevi.play();
        }

        function bubnjeviZavrsi(){
        	const bubnjevi = document.getElementById('drumRoll');
        	bubnjevi.pause();
        }

        function slagalica(trajanje, finalnoSlovo){
        	for (let i = 0; i < trajanje; i++){
        		setTimeout(function(){sledbenik.innerText = randomSlovo()}, i);
        	}
            setTimeout(function(){divZaPisanje.append(finalnoSlovo); sledbenik.innerText = ''}, trajanje);
        }

        function otkucajIme(trajanjePoSlovu){
        	var j = 1
        	const t = trajanjePoSlovu * 1000
        	for (let i = 0; i < rnd_ime.length; i++){
        		var q = (i / j) * t
        		setTimeout(function(){slagalica(t, rnd_ime[i]);}, q);
        		j += .5
			}
	    }

	    function sve(odakle, poSlovu){
	    	var pauza = 0
	    	for (var i = 1; i <= rnd_ime.length; i++){
	    		pauza += poSlovu / i
	    	}
	    	pauza += odakle
	    	pauza *= 1000
	    	odbrojavanje(odakle);
	    	setTimeout(bubnjeviPocni, odakle * 1000);
	    	setTimeout(function(){otkucajIme(poSlovu);}, odakle * 1000);
	    	setTimeout(kraj, pauza);
		}

		function kraj(){
			bubnjeviZavrsi();
			!function (){confetti.start();}();
			for (let i = 0; i < 500000; i += Math.random() * 1500){
				setTimeout(function(){
					var trube = new Audio('src/yeeey.wav');
					trube.play();
				}, i)
			}
			var tekst = document.getElementById('prethodnik')
			var boje = "#FFEE33,#E9D817,#2A009C,#5017E9,#450003,#5C0002,#94090D,#D40D12,#FF1D23,#00305A,#004B8D,#0074D9,#4192D9,#7ABAF2".split(',')
			setInterval(function(){
				var b = boje[Math.floor(Math.random() * boje.length)]
				tekst.style.color = b
			}, 150)
			
		}

        function odbrojavanje(odKoliko){
        	const o = odKoliko * 1000
	        for (let i = odKoliko; i > 0; i--){
	            setTimeout(function(){
	            	t.innerText = i;
					var audio = new Audio('src/beep.wav');
					audio.play();
	            	t.style.display = "block";
	            }, o - (i * 1000));
	            setTimeout(function(){
	            	t.style.display = "none";
	            }, o - (i * 1000 - 500));
	        }
	    }

	    function animacija(div){
	    	const elemenat = document.getElementById(div)
	    	const brzine = [0.5, 0.75, 0.9, 0.67, 1, 1.2, 1.5, 0.6, 0.25]
	    	const visinaSlikeNiz = [100, 150, 200, 250, 300, 350, 400, 450]
	    	const sirinaEkrana = window.innerWidth
	    	elemenat.style.bottom = "0px"
    		var randomVisina = visinaSlikeNiz[Math.floor(Math.random() * visinaSlikeNiz.length)]
    		var start = -randomVisina
    		elemenat.style.bottom = `${-randomVisina}px`
    		elemenat.style.height = `${randomVisina}px`
            var randomHorizontala = Math.floor(Math.random() * window.innerWidth)
            elemenat.style.left = `${randomHorizontala}px`

	    	setInterval(function(){
	    		var brzina = brzine[Math.floor(Math.random() * brzine.length)]
	    		var promenaVisine = Math.floor(Math.random() * start)

	    		!function gore(){
	    			elemenat.style.transition = `ease all ${brzina}s`
	    			elemenat.style.bottom = `${promenaVisine}px`
	    			setTimeout(function(){
	    				elemenat.style.bottom = `${start}px`;
	    				setTimeout(function(){
	    					elemenat.style.left = `${randomHorizontala}px`
	    				}, brzina * 1000)
	    			}, brzina * 1000)
	    		}()

	    }, (Math.random() + .5) * 1000 * 3)}

        function napraviBebu(kolicina){
            var spisakIdjeva = []
            for (var i = kolicina; i > 0; i--){
                var bb = document.createElement('img')
                document.body.appendChild(bb)
                bb.src = 'src/bebac.png'
                bb.classList.add('bebac')
                idIme = `${i}-bebonjak`
                bb.id = idIme
                spisakIdjeva.push(idIme)
            }
            return spisakIdjeva
        }   


        function animirajBebu(kolicina){
            var sviIdjevi = napraviBebu(kolicina);
            sviIdjevi.forEach(animacija);
        }

        function otvoriModal(){
            const modal = document.getElementById('modal')
            const modalOmotac = document.getElementById('modalWrap')
            for (let i = 1; i <= 100; i++){
                setTimeout(function(){
                    modalOmotac.style.display="block";
                    modal.style.display="block";
                    modalOmotac.style.backgroundColor="rgba(0,0,0," + i / 200 + ")"
                    modal.style.backgroundColor="rgba(255,255,255," + i / 100 + ")"
                }, i / 4)
            }
        }

        function zatvoriModal(){
            const modal = document.getElementById('modal')
            const modalOmotac = document.getElementById('modalWrap')
            modalOmotac.style.display="none";
            modal.style.display="none";
        }

        function iskljuciToggler(){
            document.getElementById('toggler').disabled="true";
            const slajder = document.getElementsByClassName('slider')[0]
            slajder.style.backgroundColor="gray";
            slajder.style.cursor="not-allowed"
        }

		function prikaziImena(){
			return imena
		}

		function dodajImena(str){
			const array = str.replace(/ /g, '').split(',')
			for (i in array){
				imena.push(array[i]);
			}
			return imena
		}

		function obrisiImena(str){
			const array = str.replace(/ /g, '').split(',')
			for (i in array){
				imena.splice(imena.indexOf(array[i]), 1)
			}
			return imena
		}

        function promeniPol(){
            var toggler = document.getElementById('toggler')
            if (toggler.value === 'bata'){
                toggler.value = 'seka'
                document.getElementById('bata').style.color = 'rgba(0,0,0,.1)'
                document.getElementById('seka').style.color = 'purple'
                rnd_ime =  imenaZenska[Math.floor(Math.random() * imenaZenska.length)]
            } else {
                toggler.value = 'bata'
                document.getElementById('seka').style.color = 'rgba(0,0,0,.1)'
                document.getElementById('bata').style.color = 'purple'
                rnd_ime =  imena[Math.floor(Math.random() * imena.length)]
            }
        }


    </script>

</body>
</html>