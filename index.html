<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title> -<|+|>- Nazivač beba ---<|+|>- </title>

    <link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAA99/GAP/PnAC3qegAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAiIgAAAAAAAhERIAAAAAACEREgAAAAAAIhESAAAAAAAhERIAAAAAACIREgAAAAAAIRESAAAAAAAiIRIAAAAAACEREgAAAAAAIiIiAAAAAAADMzAAAAAAAAMzMAAAAAAAADMAAAAAAAAAMwAAAAAAAAAAAAAAD//wAA/D8AAPgfAAD4HwAA+B8AAPgfAAD4HwAA+B8AAPgfAAD4HwAA+B8AAPw/AAD8PwAA/n8AAP5/AAD//wAA" rel="icon" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@600&display=swap" rel="stylesheet">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="confetti.js"></script>
    <script type="text/javascript" src="untitled.js"></script>
    
    <style>
        body {
            background-image: url('https://jooinn.com/images/balloons-12.jpg');
            background-size: cover;
            font-family: Verdana, sans-serif;
            overflow: hidden;
        }
        
        p {
            display: block;
            color: purple;
            font-size: 24px;
            text-align: center;
            width: 45%;
            background-color: rgba(256,256,256,.75);
            margin: 56px auto 0 auto;
            padding: 1rem;
            border-radius: 1rem;
        }

        button {
            height: 48px;
            margin: 11rem auto 2rem auto;
            text-align: center;
            display: block;
            border-radius: 24px;
            color: white;
            background-color: purple;
            padding: 12px;
            border-style: none;
            width: 200px;
            cursor: pointer;
        }

        button:disabled {
        	background-color: gray;
        	cursor: not-allowed;
        }

        #test {
            line-height: 78px;
            height:  78px;
            font-size: 74px;
            font-weight: 800;
            font-family: 'Roboto Mono', monospace;
        }

        #jupi {
            visibility: hidden;
        }

        #cnt {
        	height: 24px;
        	width: 24px;
        	font-size: 12px;
        	line-height: 24px;
        	text-align: center;
        }

        #timer {
            display: none;
            width: 100%;
            height: 100%;
            font-size: 35em;
            color: purple;
            position: absolute;
            top: 50px;
            left: 0;
            text-align: center;
            text-shadow: 0 0 30px white, 0 0 40px yellow, 0 0 50px blue;
            opacity: 0;
            animation: fade .5s linear;
            overflow: hidden;
        }

        @keyframes fade {
        	0%, 100% {opacity: 0;}
        	25%, 75% {opacity: 1;}
        }

        #naslov {
        	font-size: 100px;
		    color: purple;
		    position: absolute;
		    width: 99%;
		    top: -60px;
		    z-index: -10;
		    text-shadow: 0 0 15px white, 0 0 20px yellow, 0 0 25px blue;
        }

        .bebac {
        	width: auto;
        	height: 150px;
        	position: absolute;
        	bottom: 0;
            width: auto;
        }

        
    </style>
    
</head>
<body onLoad="animirajBebu(5)">
	<!-- <img class="bebac" src="src/bebac.png"></img> -->
	<h1 id="naslov">Nazivač beba!!!</h1>
    <div id="timer"></div>

    <button id="create" onclick="sve(2, 3);this.disabled=true;this.innerText='Srećno!'">Klikni da saznaš ime!</button>
    <audio id="drumRoll" src='src/drum.mp3' type="audio/mpeg" loop></audio>
    <audio id="yeeey" src='src/yeeey.wav' type="audio/wav"></audio>

    <p>Zvaće se:</p>
    <p id="test"><span id="prethodnik"></span><span id="sledbenik"></span></p>

    <script type="text/javascript">

    	new CircleType(document.getElementById('naslov')).radius(640);

        const imena = ['Mlatimud', 'Bradilko', 'Sofronije', 'Alimpije', 'Ćelavko', 'Glavudžovski', 'Čićvu']
        const slova = 'A,B,C,Č,Ć,D,Đ,E,F,G,H,I,J,K,L,M,N,O,P,R,S,Š,T,U,V,Z,Ž,a,b,c,č,ć,d,đ,e,f,g,h,i,j,k,l,m,n,o,p,r,s,š,t,u,v,z,ž'.split(',')
        const rnd_ime = imena[Math.floor(Math.random() * imena.length)]
        
        var counter = document.getElementById('cnt');
        var t = document.getElementById("timer");
        
		const sledbenik = document.getElementById('sledbenik')
        const divZaPisanje = document.getElementById('prethodnik')

        function randomSlovo(){
            return slova[Math.floor(Math.random() * slova.length)]
        }

        function bubnjeviPocni(){
        	const bubnjevi = document.getElementById('drumRoll');
        	bubnjevi.play();
        }

        function bubnjeviZavrsi(){
        	const bubnjevi = document.getElementById('drumRoll');
        	bubnjevi.pause();
        }

        function slagalica(trajanje, finalnoSlovo){
        	for (let i = 0; i < trajanje; i++){
        		setTimeout(function(){sledbenik.innerText = randomSlovo()}, i);
        	}
            setTimeout(function(){divZaPisanje.append(finalnoSlovo); sledbenik.innerText = ''}, trajanje);
        }

        function otkucajIme(trajanjePoSlovu){
        	var j = 1
        	const t = trajanjePoSlovu * 1000
        	for (let i = 0; i < rnd_ime.length; i++){
        		var q = (i / j) * t
        		setTimeout(function(){slagalica(t, rnd_ime[i]);}, q);
        		j += .5
			}
	    }

	    function sve(odakle, poSlovu){
	    	var pauza = 0
	    	for (var i = 1; i <= rnd_ime.length; i++){
	    		pauza += poSlovu / i
	    	}
	    	pauza += odakle
	    	pauza *= 1000
	    	odbrojavanje(odakle);
	    	setTimeout(bubnjeviPocni, odakle * 1000);
	    	setTimeout(function(){otkucajIme(poSlovu);}, odakle * 1000);
	    	setTimeout(kraj, pauza);
		}

		function kraj(){
			bubnjeviZavrsi();
			confetti.start();
			for (let i = 0; i < 500000; i += Math.random() * 1500){
				setTimeout(function(){
					var trube = new Audio('src/yeeey.wav');
					trube.play();
				}, i)
			}
			var tekst = document.getElementById('prethodnik')
			var boje = "#8700CB,#712C94,#54007F,#9B3DCB,#32004C,#5ADED4,#4DAAAB,#26596A,#163342,#003840,#005A5B,#007369,#008C72,#02A676,#B1076E,#710546,#F00A95,#FC0A9D,#D60985".split(',')
			setInterval(function(){
				var b = boje[Math.floor(Math.random() * boje.length)]
				tekst.style.color = b
			}, 150)
			
		}

        function odbrojavanje(odKoliko){
        	const o = odKoliko * 1000
	        for (let i = odKoliko; i > 0; i--){
	            setTimeout(function(){
	            	t.innerText = i;
					var audio = new Audio('src/beep.wav');
					audio.play();
	            	t.style.display = "block";
	            }, o - (i * 1000));
	            setTimeout(function(){
	            	t.style.display = "none";
	            }, o - (i * 1000 - 500));
	        }
	    }

	    function animacija(div){
	    	const elemenat = document.getElementById(div)
	    	const brzine = [0.5, 0.75, 0.9, 0.67, 1, 1.2, 1.5, 0.6, 0.25]
	    	const visinaSlikeNiz = [100, 150, 200, 250, 300]
	    	const sirinaEkrana = window.innerWidth
	    	elemenat.style.bottom = "0px"
    		var randomVisina = visinaSlikeNiz[Math.floor(Math.random() * visinaSlikeNiz.length)]
    		var start = -randomVisina
    		elemenat.style.bottom = `${-randomVisina}px`
    		elemenat.style.height = `${randomVisina}px`

	    	setInterval(function(){
	    		var brzina = brzine[Math.floor(Math.random() * brzine.length)]
	    		var promenaVisine = Math.floor(Math.random() * start)
	    		var randomHorizontala = Math.floor(Math.random() * window.innerWidth - 300)

	    		!function gore(){
	    			elemenat.style.transition = `linear all ${brzina}s`
	    			elemenat.style.bottom = `${promenaVisine}px`
	    			setTimeout(function(){
	    				elemenat.style.bottom = `${start}px`;
	    				setTimeout(function(){
	    					elemenat.style.left = `${randomHorizontala}px`
	    				}, brzina * 1000)
	    			}, brzina * 1000)
	    		}()

	    }, 3500)}

        function napraviBebu(kolicina){
            var spisakIdjeva = []
            for (var i = kolicina; i > 0; i--){
                var bb = document.createElement('img')
                document.body.appendChild(bb)
                bb.src = 'src/bebac.png'
                bb.classList.add('bebac')
                idIme = `${i}-bebonjak`
                bb.id = idIme
                spisakIdjeva.push(idIme)
            }
            return spisakIdjeva
        }   


        function animirajBebu(kolicina){
            var sviIdjevi = napraviBebu(kolicina);
            sviIdjevi.forEach(animacija);
        }


		function prikaziImena(){
			return imena
		}

		function dodajImena(str){
			const array = str.replace(/ /g, '').split(',')
			for (i in array){
				imena.push(array[i]);
			}
			return imena
		}

		function obrisiImena(str){
			const array = str.replace(/ /g, '').split(',')
			for (i in array){
				imena.splice(imena.indexOf(array[i]), 1)
			}
			return imena
		}



    </script>

</body>
</html>